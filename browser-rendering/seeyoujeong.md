# 브라우저 렌더링 엔진

## 역할

브라우저 렌더링 엔진은 서버로부터 응답받은 HTML과 CSS를 파싱하여 DOM과 CSSOM을 생성하고 이를 결합하여 렌더 트리를 생성한다. 생성한 렌더 트리를 기반으로 레이아웃을 계산하여 브라우저 화면에 웹페이지를 표시한다.

## 과정

1. 브라우저의 주소창에 입력한 URL을 통해 서버에게 HTML 문서를 요청한다.
2. 바이트 형태로 응답받은 HTML 문서를 문자열로 변환하고 파싱한다.
3. 파싱중에 블로킹 자원(`<script>`, `<style>` 등)을 만나면 파싱을 멈추고 해당 자원을 해석한다.  
   3.1. CSS 파일이나 코드를 만나면 이를 파싱하여 CSSOM을 생성한다.  
   3.2 JS 파일이나 코드를 만나면 이를 자바스크립트 엔진이 파싱하여 실행한다.
4. 블로킹 자원의 해석이 끝나면 이어서 HTML 파싱을 진행한다.
5. HTML 파싱 결과를 통해 DOM을 생성한다.
6. DOM과 CSSOM을 결합하여 렌더 트리를 생성한다.
7. 렌더 트리를 기반으로 HTML 요소의 레이아웃을 계산하고 브라우저 화면에 HTML 요소를 페인팅한다.

## 리플로우와 리페인트

DOM과 CSSOM이 변경되면 렌더 트리를 다시 생성하고 이를 기반으로 레이아웃과 페인트 과정을 거쳐 다시 렌더링하게 된다.  
리플로우는 레이아웃을 다시 계산하는 과정을 말한다.  
리페인트는 재결합된 랜더 트리를 기반으로 다시 페인트하는 과정을 말한다.
